# 前言 {.unnumbered}

```{r}
#| include: false
source("R/_common.R")
```

歡迎來到《醫學統計的微積分基礎》。

## 這本書是為誰寫的？

這本書是為了那些在醫學研究中需要使用統計方法，但對統計背後數學原理感到困惑的醫師和研究人員所寫。你可能會在以下情境中發現這本書很有幫助：

- 看到統計軟體輸出的結果，想理解「為什麼是這樣計算」
- 閱讀統計教科書時，被突然出現的積分符號嚇到
- 想要更深入理解 maximum likelihood estimation、hazard function 等概念
- 希望能和統計學家進行更有深度的討論

## 這本書的特色

### 視覺化優先

每一個數學概念，我們都會先用圖形來解釋。透過 R 程式碼產生的視覺化，你可以「看到」微積分在做什麼，而不只是「算出」微積分的結果。

### 醫學場景

所有的例子都盡量使用醫學相關的情境：

- 劑量反應曲線 (dose-response curve)
- 藥物動力學 (pharmacokinetics)
- 存活分析 (survival analysis)
- 疾病風險模型

### 統計應用導向

每一章的最後，我們都會明確說明：「這個微積分概念，會在哪些統計方法中用到」。這樣你就能建立起微積分和統計方法之間的連結。

## 你需要的先備知識

- **數學**：高中程度的代數即可。我們會從函數的概念開始複習。
- **R 程式**：基本的 R 操作能力。如果你還不熟悉 R，可以先閱讀附錄 A。
- **統計**：基本的統計觀念（平均數、標準差、迴歸分析）會有幫助，但不是必要的。

## 如何使用這本書

1. **循序漸進**：建議按照章節順序閱讀，因為後面的章節會用到前面的概念。

2. **動手操作**：每一章都有 R 程式碼，請實際執行看看。修改參數，觀察圖形如何變化。

3. **做練習題**：每章結尾的練習題分為三種類型：
   - 觀念題：不需要計算，測試你是否理解概念
   - 計算題：簡單的計算，可用 R 驗證答案
   - R 操作題：修改範例程式碼，探索更多可能性

4. **連結統計**：閱讀「統計應用」段落時，回想你在使用這些統計方法時的經驗。

## R 環境設定

本書使用 `renv` 管理 R 套件依賴。如果你想要在本地執行本書的程式碼，最簡單的方式是：

```{r}
#| eval: false

# 方法一：使用 renv 自動安裝所有依賴（推薦）
install.packages("renv")
renv::restore()
```

如果你只想手動安裝個別套件，以下是本書使用的主要套件：

```{r}
#| eval: false

# 方法二：手動安裝所需套件
install.packages(c(
  "ggplot2",    # 主要繪圖工具
  "dplyr",      # 資料處理
  "tidyr",      # 資料整理
  "patchwork",  # 組合多個圖
  "plotly",     # 互動式 3D 圖
  "showtext",   # 中文字型支援
  "here",       # 專案路徑管理
  "MASS",       # 多變量統計
  "mvtnorm",    # 多變量常態分布
  "pracma",     # 數值積分方法
  "gridExtra"   # 圖形排列
))
```

```{r}
#| message: false
#| warning: false

# 載入套件（已在 _common.R 中載入 ggplot2, patchwork, showtext）
library(dplyr)
```

## 配色說明

為了視覺一致性，本書的圖形使用以下配色：

- **主色** `#2E86AB`：用於主要曲線和資料
- **強調色** `#E94F37`：用於重點標示和對比

```{r}
#| echo: false
#| fig-height: 2
#| fig-showtext: true

ggplot() +
  geom_tile(aes(x = 1, y = 1, fill = "主色"), width = 1, height = 1) +
  geom_tile(aes(x = 2.2, y = 1, fill = "強調色"), width = 1, height = 1) +
  scale_fill_manual(values = c("主色" = "#2E86AB", "強調色" = "#E94F37")) +
  coord_fixed() +
  theme_void() +
  theme(legend.position = "bottom", legend.title = element_blank())
```

## 致謝 {.unnumbered}

感謝所有在醫學研究道路上努力學習統計的醫師們。你們的求知熱忱是這本書誕生的動力。

讓我們開始這段微積分之旅吧！
